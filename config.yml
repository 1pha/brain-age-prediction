# MISC
seed: 42
registration: mni
plot: False
RESULT_PATH: ../result/models/
use_amp: True
gpu_num: 1

# DATALOADER
test_size: 0.2
batch_size: 16
augment: False
augment_replacement: False
resize: [96, 96, 96]
aug_proba:
  affine: 0.33
  flip: 0.33
  elastic_deform: 0.33
aug_intensity:
  affine: [0.1, 10]
  elastic_deform: [7, .5]
unused_src:
  - ~
partial: 1.0

# DEBUG
debug: False
force_cpu: False
data_debug:
  rot90: False
  return_path: False
  aug_verbose: False
run_debug:
  return_all: False
  verbose_all: False

# MODEL
layers: [4, 8, 16, 32]
batchnorm: True # Vres
double: False # Vres
dropout: True # SFCN
channel_number: [32, 64, 128, 256, 64] # SFCN
start_channels: 16 # RESNET

# TRAIN
epochs: 100
mae_threshold: 8.0
checkpoint_period: 5
verbose_period: 1
early_patience: 20
optimizer: adam
lr: 0.0001
weight_decay: 0

model_name: resnet
lamb: 0.0005
learning_rate: 0.0001
scheduler: false
loss: mse
metrics:
  - rmse
  - mae
  - r2
  - corr

# MODEL SETUP
encoder:
  name: vanillaconv
  # start_channel: 16 for Resnet
  config:
    start_channels: 8

regressor:
  name: nkregressor
  init_node: 128

domainer:
  name: nkdomainpredictor
  init_node: 128
  num_dbs: 2

alpha: 1 # DOMAINER WEIGHT
beta: 10 # CONFUSION WEIGHT

# OPTIMIZER SETTINGS
reg_opt:
  optimizer: adam
  lr: .0001
  weight_decay: 0

clf_opt:
  optimizer: adam
  lr: .0001
  weight_decay: 0

unl_opt:
  optimizer: adam
  lr: .0001
  weight_decay: 0

phase_config:
  epochs: [100, 10, 50]
  update: [[reg], [clf], [unl, reg]]
